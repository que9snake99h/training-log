<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>トレーニング記録</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f7f7f7;
}

.container {
  padding: 16px;
  max-width: 420px;
  margin: auto;
}

/* 日付 */
.date {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 12px;
}

/* 体重 */
.weight-label {
  font-size: 14px;
}
.weight-input {
  font-size: 26px;
  width: 100%;
  margin: 6px 0 16px;
}

/* 種別 */
.type {
  font-size: 16px;
  font-weight: bold;
  margin-bottom: 12px;
}

/* 行 */
.row {
  display: flex;
  align-items: center;
  font-size: 18px;
  margin-bottom: 10px;
}

.row input[type="checkbox"] {
  width: 22px;
  height: 22px;
  margin-right: 10px;
}

.row input[type="number"] {
  font-size: 18px;
  width: 70px;
  margin-left: auto;
}

/* フッター */
.footer {
  display: flex;
  gap: 12px;
  margin-top: 16px;
}

button {
  flex: 1;
  font-size: 16px;
  padding: 12px;
}
</style>
</head>

<body>
<div class="container">

  <!-- 日付 -->
  <input type="date" id="date" class="date" />

  <!-- 体重 -->
  <div class="weight-label">体重</div>
  <input type="number" id="weight" class="weight-input" step="0.1" />

  <!-- 種別 -->
  <div id="type" class="type"></div>

  <!-- 内容 -->
  <div id="content"></div>

  <!-- ボタン -->
  <div class="footer">
    <button onclick="save()">保存する</button>
    <button onclick="alert('履歴は次に作ります')">履歴を見る</button>
  </div>

</div>

<script>
const trainingMenus = [
  { name: "腕立て", reps: 20 },
  { name: "スクワット", reps: 30 }
];

const stretchMenus = ["頭", "首", "肩", "背中", "腰", "足"];

const dateInput = document.getElementById("date");
const weightInput = document.getElementById("weight");
const typeEl = document.getElementById("type");
const contentEl = document.getElementById("content");

// 初期化
const today = new Date().toISOString().split("T")[0];
dateInput.value = today;
weightInput.value = 63.0;

dateInput.addEventListener("change", render);

function isTrainingDay(dateStr) {
  return new Date(dateStr).getDate() % 2 === 1;
}

function render() {
  const date = dateInput.value;
  contentEl.innerHTML = "";

  const training = isTrainingDay(date);
  typeEl.textContent = training ? "今日：トレーニング" : "今日：ストレッチ";

  if (training) {
    trainingMenus.forEach(menu => {
      const row = document.createElement("div");
      row.className = "row";
      row.innerHTML = `
        <input type="checkbox">
        ${menu.name}
        <input type="number" value="${menu.reps}">
      `;
      contentEl.appendChild(row);
    });
  } else {
    stretchMenus.forEach(name => {
      const row = document.createElement("div");
      row.className = "row";
      row.innerHTML = `
        <input type="checkbox">
        ${name}
      `;
      contentEl.appendChild(row);
    });
  }

  load();
}

function save() {
  const data = {
    weight: weightInput.value,
    checks: [...document.querySelectorAll(".row input[type='checkbox']")].map(c => c.checked),
    reps: [...document.querySelectorAll(".row input[type='number']")].map(n => n.value)
  };
  localStorage.setItem(dateInput.value, JSON.stringify(data));
  alert("保存しました");
}

function load() {
  const saved = localStorage.getItem(dateInput.value);
  if (!saved) return;
  const data = JSON.parse(saved);

  weightInput.value = data.weight;

  document.querySelectorAll(".row input[type='checkbox']").forEach((c, i) => {
    c.checked = data.checks[i] || false;
  });

  document.querySelectorAll(".row input[type='number']").forEach((n, i) => {
    if (data.reps[i]) n.value = data.reps[i];
  });
}

render();
</script>
</body>
</html>
