<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å¥åº·ãƒ­ã‚°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: sans-serif;
      max-width: 420px;
      margin: auto;
      padding: 16px;
    }
    h2 {
      margin-bottom: 8px;
    }
    label {
      display: block;
      margin-top: 12px;
    }
    input, select {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
    }
    .card {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 12px;
      margin-top: 16px;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-top: 16px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<h2 id="dayType"></h2>

<label>
  æ—¥ä»˜
  <input type="date" id="date">
</label>

<label>
  ä½“é‡ï¼ˆkgï¼‰
  <input type="number" id="weight" step="0.1" value="63">
</label>

<div id="training" class="card">
  <h3>ğŸ‹ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</h3>
  <label><input type="checkbox" id="trainDone"> ã‚„ã£ãŸ</label>

  <label>
    ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    <select id="menu">
      <option>ï¼ˆæœªé¸æŠï¼‰</option>
      <option>è…•ç«‹ã¦</option>
      <option>è…¹ç­‹</option>
      <option>ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ</option>
    </select>
  </label>

  <label>
    å›æ•°
    <input type="number" id="count">
  </label>
</div>

<div id="stretch" class="card">
  <h3>ğŸ§˜ ã‚¹ãƒˆãƒ¬ãƒƒãƒ</h3>
  <label><input type="checkbox" id="stretchDone"> ã‚„ã£ãŸ</label>

  <label><input type="checkbox" class="part" value="é ­"> é ­</label>
  <label><input type="checkbox" class="part" value="é¦–"> é¦–</label>
  <label><input type="checkbox" class="part" value="è‚©"> è‚©</label>
  <label><input type="checkbox" class="part" value="èƒŒä¸­"> èƒŒä¸­</label>
  <label><input type="checkbox" class="part" value="è…°"> è…°</label>
  <label><input type="checkbox" class="part" value="è¶³"> è¶³</label>
</div>

<button onclick="save()">ä¿å­˜</button>

<script>
  const dateInput = document.getElementById("date");
  const weightInput = document.getElementById("weight");
  const trainingDiv = document.getElementById("training");
  const stretchDiv = document.getElementById("stretch");
  const dayTypeLabel = document.getElementById("dayType");

  // ä»Šæ—¥ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  const today = new Date().toISOString().slice(0, 10);
  dateInput.value = today;

  function updateUI() {
    const date = new Date(dateInput.value);
    const isTrainingDay = date.getDate() % 2 === 0;

    trainingDiv.style.display = isTrainingDay ? "block" : "none";
    stretchDiv.style.display = isTrainingDay ? "none" : "block";
    dayTypeLabel.textContent = isTrainingDay ? "ğŸ‹ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ—¥" : "ğŸ§˜ ã‚¹ãƒˆãƒ¬ãƒƒãƒã®æ—¥";

    load();
  }

  dateInput.addEventListener("change", updateUI);

  function save() {
    const date = dateInput.value;
    const isTrainingDay = new Date(date).getDate() % 2 === 0;

    const record = {
      date,
      weight: weightInput.value,
      type: isTrainingDay ? "training" : "stretch"
    };

    if (isTrainingDay) {
      record.done = document.getElementById("trainDone").checked;
      record.menu = document.getElementById("menu").value;
      record.count = document.getElementById("count").value;
    } else {
      record.done = document.getElementById("stretchDone").checked;
      record.parts = [...document.querySelectorAll(".part:checked")].map(p => p.value);
    }

    localStorage.setItem(date, JSON.stringify(record));
    alert("ä¿å­˜ã—ã¾ã—ãŸ");
  }

  function load() {
    const date = dateInput.value;
    const data = localStorage.getItem(date);
    if (!data) return;

    const record = JSON.parse(data);
    weightInput.value = record.weight;

    if (record.type === "training") {
      document.getElementById("trainDone").checked = record.done;
      document.getElementById("menu").value = record.menu;
      document.getElementById("count").value = record.count;
    } else {
      document.getElementById("stretchDone").checked = record.done;
      document.querySelectorAll(".part").forEach(p => {
        p.checked = record.parts?.includes(p.value);
      });
    }
  }

  updateUI();
</script>

</body>
</html>
